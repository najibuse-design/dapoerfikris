<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dapoer Fikri's | Kehangatan Masakan Rumah</title>
    <meta name="description"
        content="Selamat datang di Dapoer Fikri's. Nikmati kelezatan masakan rumah yang hangat dan autentik. Pesan sekarang melalui WhatsApp!">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="top-bar"></div>
    <div id="toastContainer" class="toast-container"></div>

    <!-- Header Navigation -->
    <header>
        <div class="logo-container" id="mainLogo" style="cursor: pointer; display: flex; align-items: center;">
            <img src="logo_dapoer_fikris.jpg" alt="Dapoer Fikri's Logo"
                style="height: 50px; width: auto; border-radius: 50%; border: 2px solid var(--primary); margin-right: 10px;">
            <span class="logo-text">Dapoer Fikri's</span>
        </div>
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#catalog">Katalog</a></li>
                <li><a href="#order">Pesan</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>Kehangatan di Setiap Gigitan</h1>
            <p>Selamat datang di Dapoer Fikri's! Kami menyajikan hidangan istimewa yang dimasak dengan penuh kasih
                sayang, khusus untuk memanjakan lidah Anda dan keluarga.</p>
            <a href="#catalog" class="btn">Lihat Menu Kami</a>
        </div>
    </section>

    <!-- Catalog Section -->
    <section class="catalog" id="catalog">
        <div class="section-title reveal">
            <h2>Katalog Camilan Kami</h2>
            <p>Berbagai pilihan camilan lezat buatan rumah</p>
        </div>

        <div id="loadingMessage" style="text-align: center; display: none;">Memuat Menu...</div>
        <div class="product-grid" id="productGrid">
            <!-- Products will be loaded by Firebase/JavaScript -->
        </div>
    </section>

    <!-- Order Section -->
    <section class="order-section" id="order">
        <div class="section-title reveal">
            <h2>Form Pemesanan</h2>
            <p>Silakan isi data Anda, kami akan segera memproses pesanan Anda</p>
        </div>

        <div class="form-container reveal">
            <form id="orderForm">
                <div class="form-group">
                    <label for="name">Nama Lengkap</label>
                    <input type="text" id="name" placeholder="Masukkan nama Anda" required>
                </div>
                <div class="form-group">
                    <label for="address">Alamat Pengiriman</label>
                    <textarea id="address" rows="3" placeholder="Masukkan alamat lengkap" required></textarea>
                </div>
                <div class="form-group">
                    <label for="product">Produk yang Dipesan</label>
                    <select id="product" required>
                        <option value="">-- Pilih Produk --</option>
                        <!-- Dynamic Options -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="quantity">Jumlah Pesanan</label>
                    <input type="number" id="quantity" min="1" value="1" required>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Kirim Pesanan Via WhatsApp</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer style="padding: 50px 5%; text-align: center; background: var(--dark); color: var(--white);">
        <p>&copy; 2024 Dapoer Fikri's. Dibuat dengan ❤️ untuk pelanggan setia kami.</p>
    </footer>

    <!-- Admin Overlay -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-card">
            <span class="close-admin" id="closeAdmin">&times;</span>
            <div id="loginSection">
                <h2>Login Admin</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" placeholder="admin@dapoerfikris.com" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" placeholder="******" required>
                    </div>
                    <button type="submit" class="btn" style="width: 100%;">Login</button>
                </form>
            </div>

            <div id="adminDashboardSection" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <div class="owner-badge">Owner Dashboard</div>
                    <div id="dbStatus"
                        style="font-size: 0.7rem; padding: 4px 8px; border-radius: 10px; background: #eee;">Checking...
                    </div>
                </div>
                <h2>Tambah/Edit Produk</h2>
                <form id="adminForm">
                    <input type="hidden" id="adminProductId">
                    <div class="form-group">
                        <label>Nama Produk</label>
                        <input type="text" id="adminProductName" placeholder="Contoh: Dimsum Udang" required>
                    </div>
                    <div class="form-group">
                        <label>Harga (Tanpa Rp)</label>
                        <input type="text" id="adminProductPrice" placeholder="Contoh: 25.000" required>
                    </div>
                    <div class="form-group">
                        <label>Foto Produk</label>
                        <input type="file" id="adminProductFile" accept="image/*" style="padding: 10px 0;">
                        <input type="hidden" id="adminProductImg">
                        <div id="imagePreview" style="margin-top: 10px; display: none;">
                            <img id="previewImg" src=""
                                style="width: 100px; height: 100px; object-fit: cover; border-radius: 10px;">
                            <p id="uploadStatus" style="font-size: 0.7rem; color: #2ed573; margin-top: 5px;"></p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Deskripsi Singkat</label>
                        <textarea id="adminProductDesc" rows="2" placeholder="Deskripsi singkat produk..."
                            required></textarea>
                    </div>
                    <div id="adminFormButtons" style="display: flex; gap: 10px;">
                        <button type="submit" id="saveProductBtn" class="btn" style="flex: 2;">Simpan ke
                            Database</button>
                        <button type="button" id="cancelEditBtn" class="btn"
                            style="flex: 1; background: #ccc; display: none;">Batal</button>
                    </div>
                </form>

                <div class="admin-product-list" id="adminProductList">
                    <!-- List for management -->
                </div>
            </div>
            <p id="adminNote" style="font-size: 0.7rem; color: #666; margin-top: 15px; text-align: center;">Note: Jika
                database belum
                aktif, produk disimpan secara lokal di browser ini saja.</p>
            <button id="logoutBtn" class="btn"
                style="background: #333; margin-top: 10px; width: 100%; display: none;">Logout</button>
        </div>
    </div>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/6281284552180" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Back to Top Button -->
    <div id="backToTop"
        style="position: fixed; bottom: 100px; right: 30px; background: var(--primary); color: white; width: 50px; height: 50px; border-radius: 50%; display: none; align-items: center; justify-content: center; cursor: pointer; z-index: 1000; box-shadow: var(--shadow); transition: var(--transition);">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Firebase SDK (Modular) -->
    <script type="module">
        // --- KONFIGURASI FIREBASE KAMU ---
        const firebaseConfig = {
            apiKey: "AIzaSyDmfq1T53TlwH6JmObayLxvaBDBroS5-6g",
            authDomain: "dapoer-fikris.firebaseapp.com",
            projectId: "dapoer-fikris",
            storageBucket: "dapoer-fikris.firebasestorage.app",
            messagingSenderId: "727256435956",
            appId: "1:727256435956:web:e1b6e61f6bf713340962a1",
            measurementId: "G-PXVG0FMJN4"
        };

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, onSnapshot, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Initialize Firebase
        let db = null;
        let auth = null;
        let isFirebaseActive = false;

        if (firebaseConfig.apiKey !== "YOUR_API_KEY") {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            isFirebaseActive = true;
            console.log("Firebase Terkoneksi!");
        }

        const defaultProducts = [
            { id: "1", name: "Pastel", price: "3.500", img: "Pastel.jpeg", desc: "Pastel gurih dengan isian wortel, kentang, dan telur pilihan." },
            { id: "2", name: "Rempeyek Kacang", price: "15.000", img: "Rempeyek kacang.jpeg", desc: "Rempeyek kacang renyah dan gurih, camilan pas buat kumpul." },
            { id: "3", name: "Stik Keju", price: "12.000", img: "keju.jpeg", desc: "Stik keju garing dengan rasa keju asli yang melimpah." },
            { id: "4", name: "Rempeyek Teri", price: "15.000", img: "Rempeyek teri.jpeg", desc: "Rempeyek gurih dengan teri pilihan, renyah dan nikmat." },
            { id: "5", name: "Akar Kelapa", price: "12.000", img: "akar kelapa.jpeg", desc: "Camilan tradisional akar kelapa yang manis and garing." },
            { id: "6", name: "Stik Bawang", price: "10.000", img: "stik bawang.jpeg", desc: "Stik bawang renyah cocok untuk teman santai." },
            { id: "7", name: "Stik Ubi", price: "10.000", img: "stik ubi.jpeg", desc: "Stik ubi manis alami tanpa bahan pengawet." },
            { id: "8", name: "Kripik Bawang", price: "10.000", img: "kripik bawang.jpeg", desc: "Kripik bawang homemade yang gurih dan renyah." },
            { id: "9", name: "Jalon Singkong Gurih", price: "10.000", img: "jalon singkong gurih.jpeg", desc: "Olahan singkong gurih yang bikin ketagihan." },
            { id: "10", name: "Bolu Kukus", price: "3.000", img: "bolu kukus.jpeg", desc: "Bolu kukus yang lembut dan mekar sempurna." },
            { id: "11", name: "Bolu Pandan", price: "35.000", img: "bolu pandan.jpeg", desc: "Bolu pandan wangi dengan tekstur empuk." },
            { id: "12", name: "Brownis", price: "40.000", img: "brownis.jpeg", desc: "Brownis coklat lumer yang nyoklat banget." },
            { id: 13, name: "Marmer Cake", price: "45.000", img: "marmer cake.jpeg", desc: "Cake marmer klasik dengan mentega pilihan." },
            { id: 14, name: "Putu Ayu", price: "3.000", img: "putu ayu.jpeg", desc: "Kue putu ayu dengan taburan kelapa gurih." },
            { id: 15, name: "Sosis Solo", price: "3.500", img: "sosis solo.jpeg", desc: "Sosis solo isian ayam suwir gurih." },
            { id: 16, name: "Karamel", price: "12.000", img: "karamel.jpeg", desc: "Camilan karamel yang manis dan legit." }
        ];

        let currentProducts = [...defaultProducts];

        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            const icon = type === 'success' ? 'fa-check-circle' : (type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle');

            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${message}</span>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('out');
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        function renderCatalog(products = currentProducts) {
            const grid = document.getElementById('productGrid');
            const select = document.getElementById('product');

            grid.innerHTML = '';
            select.innerHTML = '<option value="">-- Pilih Produk --</option>';

            products.forEach((p, index) => {
                const card = document.createElement('div');
                card.className = "product-card reveal";
                card.style.transitionDelay = `${index * 0.1}s`;
                card.innerHTML = `
                    <img src="${p.img}" alt="${p.name}" class="product-img" loading="lazy">
                    <div class="product-info">
                        <h3>${p.name}</h3>
                        <p>${p.desc}</p>
                        <p class="product-price">Rp ${p.price}</p>
                        <a href="#order" class="btn" onclick="selectProduct('${p.name}')">Pesan Sekarang</a>
                    </div>
                `;
                grid.appendChild(card);

                const opt = document.createElement('option');
                opt.value = p.name;
                opt.textContent = `${p.name} (Rp ${p.price})`;
                select.appendChild(opt);
            });

            // Trigger reveal after small delay
            setTimeout(() => {
                document.querySelectorAll('.reveal').forEach(el => el.classList.add('active'));
            }, 100);
        }

        window.selectProduct = function (name) {
            const productSelect = document.getElementById('product');
            productSelect.value = name;
            // Highlight the select to show it's updated
            productSelect.style.borderColor = 'var(--primary)';
            setTimeout(() => productSelect.style.borderColor = '#ddd', 1000);
        };

        function renderAdminList(products = currentProducts) {
            const list = document.getElementById('adminProductList');
            if (!list) return;
            list.innerHTML = '<strong>Daftar Produk:</strong>';

            products.forEach(p => {
                const item = document.createElement('div');
                item.className = 'admin-product-item';
                item.innerHTML = `
                    <span style="flex: 1;">${p.name}</span>
                    <div style="display: flex; gap: 10px;">
                        <span class="edit-btn" style="color: #ffa502; cursor: pointer;" onclick="editProduct('${p.id}')">Edit</span>
                        <span class="delete-btn" onclick="deleteProduct('${p.id}')">Hapus</span>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        // --- LISTEN FOR CHANGES (REAL-TIME) ---
        if (isFirebaseActive) {
            const dbStatusEl = document.getElementById('dbStatus');
            onSnapshot(collection(db, "products"), (snapshot) => {
                const firebaseProducts = [];
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    if (data.status !== "deleted") {
                        firebaseProducts.push({ id: doc.id, ...data });
                    }
                });

                if (firebaseProducts.length === 0) {
                    if (dbStatusEl) {
                        dbStatusEl.innerHTML = '<i class="fas fa-cloud"></i> Cloud Kosong';
                        dbStatusEl.style.color = "#ffa502";
                    }
                    // Jika Cloud kosong, tampilkan default sebagai fallback awal
                    currentProducts = [...defaultProducts];
                } else {
                    if (dbStatusEl) {
                        dbStatusEl.innerHTML = '<i class="fas fa-check-circle"></i> Cloud Aktif';
                        dbStatusEl.style.color = "#2ed573";
                    }
                    // DATABASE CLOUD ADALAH SATU-SATUNYA SUMBER
                    currentProducts = firebaseProducts;
                }

                renderCatalog(currentProducts);
                renderAdminList(currentProducts);
            }, (error) => {
                console.error("Firebase Snapshot Error:", error);
                if (dbStatusEl) {
                    dbStatusEl.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Error Cloud';
                    dbStatusEl.style.color = "#ff4757";
                }
                showToast("Gagal koneksi Cloud: " + error.message, "error");
            });
        } else {
            const dbStatusEl = document.getElementById('dbStatus');
            if (dbStatusEl) {
                dbStatusEl.innerHTML = '<i class="fas fa-hdd"></i> Mode Lokal';
                dbStatusEl.style.color = "#747d8c";
            }
            const saved = localStorage.getItem('dapoer_products');
            if (saved) {
                currentProducts = JSON.parse(saved);
            }
            renderCatalog(currentProducts);
            renderAdminList(currentProducts);
        }

        window.editProduct = function (id) {
            const product = currentProducts.find(p => String(p.id) === String(id));
            if (!product) return;

            document.getElementById('adminProductId').value = product.id;
            document.getElementById('adminProductName').value = product.name;
            document.getElementById('adminProductPrice').value = product.price;
            document.getElementById('adminProductImg').value = product.img;
            document.getElementById('adminProductDesc').value = product.desc;

            // Show preview for existing image
            const preview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            previewImg.src = product.img;
            preview.style.display = 'block';

            document.getElementById('saveProductBtn').textContent = "Update Produk";
            document.getElementById('cancelEditBtn').style.display = "block";
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        const fileInput = document.getElementById('adminProductFile');
        fileInput.onchange = (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = (event) => {
                const imgElement = document.createElement("img");
                imgElement.src = event.target.result;

                imgElement.onload = (e) => {
                    const canvas = document.createElement("canvas");
                    const MAX_WIDTH = 600; // Ukuran optimal agar database tidak berat
                    const scaleSize = MAX_WIDTH / e.target.width;
                    canvas.width = MAX_WIDTH;
                    canvas.height = e.target.height * scaleSize;

                    const ctx = canvas.getContext("2d");
                    ctx.drawImage(e.target, 0, 0, canvas.width, canvas.height);

                    // Kompres ke format JPEG kualitas 0.7
                    const compressedBase64 = canvas.toDataURL("image/jpeg", 0.7);

                    document.getElementById('adminProductImg').value = compressedBase64;
                    document.getElementById('previewImg').src = compressedBase64;
                    document.getElementById('imagePreview').style.display = 'block';
                    document.getElementById('uploadStatus').textContent = "Foto siap!";
                    showToast("Foto berhasil diproses", "success");
                };
            };
        };

        // Clear manual URL logic as we now use automatic base64
        const adminProductImg = document.getElementById('adminProductImg');

        document.getElementById('cancelEditBtn').onclick = () => {
            document.getElementById('adminForm').reset();
            document.getElementById('adminProductId').value = "";
            document.getElementById('adminProductImg').value = "";
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('saveProductBtn').textContent = "Simpan ke Database";
            document.getElementById('cancelEditBtn').style.display = "none";
        };

        window.deleteProduct = async function (id) {
            if (!confirm("Hapus produk ini secara permanen?")) return;

            if (isFirebaseActive) {
                try {
                    const isFirebaseId = String(id).length > 5;

                    if (!isFirebaseId) {
                        // Jika produk default (ID pendek), simpan tanda hapus di Cloud
                        await addDoc(collection(db, "products"), {
                            originalId: id,
                            status: "deleted",
                            updatedAt: new Date().toISOString()
                        });
                        showToast("Produk disembunyikan", "error");
                    } else {
                        await deleteDoc(doc(db, "products", id));
                        showToast("Produk terhapus dari Cloud!", "success");
                    }
                } catch (err) {
                    showToast("Gagal menghapus: " + err.message, "error");
                }
            } else {
                currentProducts = currentProducts.filter(p => String(p.id) !== String(id));
                localStorage.setItem('dapoer_products', JSON.stringify(currentProducts));
                renderCatalog(currentProducts);
                renderAdminList(currentProducts);
                showToast("Produk dihapus (Lokal)", "error");
            }
        };

        // Admin Form Submit
        document.getElementById('adminForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('saveProductBtn');
            const editId = document.getElementById('adminProductId').value;
            btn.textContent = "Menyimpan...";
            btn.disabled = true;

            const productData = {
                name: document.getElementById('adminProductName').value,
                price: document.getElementById('adminProductPrice').value,
                img: document.getElementById('adminProductImg').value,
                desc: document.getElementById('adminProductDesc').value,
                updatedAt: new Date().toISOString()
            };

            if (isFirebaseActive) {
                try {
                    // Secara eksplisit cek apakah editId adalah ID Firebase (panjang) atau default (pendek/angka)
                    const isFirebaseId = editId && String(editId).length > 5;

                    if (isFirebaseId) {
                        await updateDoc(doc(db, "products", editId), productData);
                        showToast("Produk Update di Cloud!", "success");
                    } else {
                        // Ini adalah produk baru ATAU edit produk default yang belum ada di cloud
                        await addDoc(collection(db, "products"), {
                            ...productData,
                            createdAt: new Date().toISOString()
                        });
                        showToast("Produk Baru/Edit Cloud Tersimpan!", "success");
                    }
                } catch (err) {
                    showToast("Gagal ke Firebase: " + err.message, "error");
                }
            } else {
                if (editId) {
                    const index = currentProducts.findIndex(p => String(p.id) === String(editId));
                    if (index !== -1) currentProducts[index] = { ...currentProducts[index], ...productData, id: editId };
                } else {
                    const newProduct = { id: Date.now().toString(), ...productData, createdAt: new Date().toISOString() };
                    currentProducts.push(newProduct);
                }
                localStorage.setItem('dapoer_products', JSON.stringify(currentProducts));
                renderCatalog(currentProducts);
                renderAdminList(currentProducts);
                showToast(editId ? "Update Lokal Berhasil!" : "Tambah Lokal Berhasil!", "success");
            }

            e.target.reset();
            document.getElementById('adminProductId').value = "";
            document.getElementById('adminProductImg').value = "";
            document.getElementById('imagePreview').style.display = 'none';
            btn.textContent = "Simpan ke Database";
            document.getElementById('cancelEditBtn').style.display = "none";
            btn.disabled = false;
        };

        // --- UI LOGIC ---
        const overlay = document.getElementById('adminOverlay');
        const closeBtn = document.getElementById('closeAdmin');
        const logo = document.getElementById('mainLogo');
        let logoClicks = 0;

        logo.onclick = () => {
            logoClicks++;
            if (logoClicks >= 5) {
                overlay.style.display = 'flex';
                logoClicks = 0;
            }
        };

        // Auth Logic
        const loginForm = document.getElementById('loginForm');
        const loginSection = document.getElementById('loginSection');
        const adminDashboardSection = document.getElementById('adminDashboardSection');
        const logoutBtn = document.getElementById('logoutBtn');

        if (isFirebaseActive) {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    loginSection.style.display = 'none';
                    adminDashboardSection.style.display = 'block';
                    logoutBtn.style.display = 'block';
                } else {
                    loginSection.style.display = 'block';
                    adminDashboardSection.style.display = 'none';
                    logoutBtn.style.display = 'none';
                }
            });

            loginForm.onsubmit = async (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const pass = document.getElementById('loginPassword').value;
                try {
                    await signInWithEmailAndPassword(auth, email, pass);
                    showToast("Login Berhasil!", "success");
                } catch (err) {
                    showToast("Login Gagal: " + err.message, "error");
                }
            };

            logoutBtn.onclick = async () => {
                await signOut(auth);
                showToast("Berhasil Logout", "info");
            };
        } else {
            // No Firebase, simulate login for local testing
            loginForm.onsubmit = (e) => {
                e.preventDefault();
                loginSection.style.display = 'none';
                adminDashboardSection.style.display = 'block';
                logoutBtn.style.display = 'block';
                showToast("Mode Lokal: Login Simulasi Berhasil", "info");
            };
            logoutBtn.onclick = () => {
                loginSection.style.display = 'block';
                adminDashboardSection.style.display = 'none';
                logoutBtn.style.display = 'none';
                showToast("Berhasil Logout Lokal", "info");
            };
        }

        closeBtn.onclick = () => overlay.style.display = 'none';

        // Order Form
        document.getElementById('orderForm').onsubmit = (e) => {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const address = document.getElementById('address').value;
            const product = document.getElementById('product').value;
            const quantity = document.getElementById('quantity').value;
            const message = `Halo Dapoer Fikri's, saya mau pesan:%0A%0A*Nama:* ${name}%0A*Alamat:* ${address}%0A*Produk:* ${product}%0A*Jumlah:* ${quantity}%0A%0ATerima kasih!`;
            window.open(`https://wa.me/6281284552180?text=${message}`, '_blank');
        };

        // Scroll Reveal & Back to Top
        const backToTop = document.getElementById('backToTop');
        window.addEventListener("scroll", () => {
            // Reveal elements
            document.querySelectorAll(".reveal:not(.active)").forEach(el => {
                if (el.getBoundingClientRect().top < window.innerHeight - 100) el.classList.add("active");
            });

            // Back to Top visibility
            if (window.scrollY > 500) {
                backToTop.style.display = 'flex';
                setTimeout(() => backToTop.style.opacity = '1', 10);
            } else {
                backToTop.style.opacity = '0';
                setTimeout(() => { if (window.scrollY <= 500) backToTop.style.display = 'none'; }, 400);
            }
        });

        backToTop.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

        // Start
        renderCatalog();
        renderAdminList();
    </script>
</body>

</html>